FF2_VID = 0x0a2d            # Vendor ID
FF2_PID = 0x0015            # Product ID
MAX_BULK_SIZE = 0xffc0
CHUNK_SIZE = 1<<15
DITHER_LEN = 0.
TRAC_LEN = 10e3
OFFSET = -0.25
TRIG_THRESH = 0.
TPP = 1.

# Endpoint Numbers
CONTROL_OUT = 0x01          # Endpoints for USB Control
CONTROL_IN = 0x81
SPECTRA_OUT = 0x08          # Endpoints for Spectra
SPECTRA_IN = 0x82

# Vendor Control Requests
MEMORY_SET_REQUEST = 0xa3

# More Miscellaneous Commands
SET_CMD = 0x10              # used by setParameter
GET_CMD = 0x11              # used by getParameter

# FastFlight 2 Memory Addresses
MISC_CNTRL_PTR = 0xa10f     # Pointer to device memory port with some random control flags below
RUN_MASK = 0x01
EXT_TRIGGER_MASK = 0x02
RAPID_PROTOCOL_MASK = 0x04
UNKNOWN_START = 0x08        # Set at the start of aquisition (might be clear trace memory)
TIMER_RESET_MASK = 0x10

PROTOCOL_SET_PTR = 0xa1fe
PROTOCOL_BASE = 0xa200
PROTOCOL_STEP = 0x0020

TRIGGER_PARAMETER = 0x06
TRIGGER_POLARITY_MASK = 0x10
TRIGGER_RISING_MASK = 0x02

OVERLOAD = 0x01
UNDERLOAD = 0x02

CODE_DATA_MASK = 0x001FFFFF

import os
FPGA_DIR = os.path.join(os.path.dirname(__file__), "FPGA")

STRANGE_DANCE = [0x23, 0x21, 0x20, -0x20, 0x22, 0x23, 0x22, 0x20, 0x21, 0x20,
                0x22, 0x23, 0x22, 0x20, 0x21, 0x20, 0x20, 0x21, 0x20, 0x20, 
                0x21, 0x20, 0x20, 0x21, 0x20, 0x22, 0x23, -0x23, 0x22, -0xa2,
                0x20, 0x21, 0x20, 0x20, 0x21, 0x20, 0x20, 0x21, 0x20, 0x20, 
                0x21, 0x20, 0x20, 0x21, 0x20, 0x20, 0x21, 0x20, 0x20, 0x21, 
                0x20, 0x20, 0x21, 0x20, 0x22, 0x23, -0x23, 0x22 - 0xa2, 0x22,
                0x23, 0x22, 0x20, 0x21, 0x20, 0x20, 0x21, 0x20, 0x20, 0x21, 
                0x20, 0x22, 0x23, 0x22, 0x22, 0x23, 0x22, 0x20, 0x21, 0x20,
                0x20, 0x21, 0x20, 0x22, 0x23, -0x23, 0x22, 0x23, 0x21, 0x20, 
                -0x20, 0x22, 0x23, 0x22, 0x20, 0x21, 0x20, 0x22, 0x23, 0x22, 
                0x20, 0x21, 0x20, 0x20, 0x21, 0x20, 0x20, 0x21, 0x20, 0x20, 
                0x21, 0x20, 0x22, 0x23, 0x22, 0x22, 0x23, -0x23, 0x22, -0x22,
                0x22, 0x23, -0x23, 0x22, 0x23, -0x23, 0x22, 0x23, -0x23, 0x22, 
                0x23, -0x23, 0x22, 0x23, -0x23, 0x22, 0x23, -0xa3, 0x22, 0x23, 
                -0xa3, 0x22, 0x23, -0x23, 0x22, 0x20, 0x21, 0x20, -0x20, 0x22, 
                0x23, -0xa3, 0x22, 0x23, -0x23, 0x22, 0x23, -0x23, 0x22, 0x23, 
                -0xa3, 0x22, 0x23, -0xa3, 0x22, 0x23, -0xa3, 0x22, 0x23, -0xa3,
                0x22, 0x23, -0xa3, 0x22, 0x20, 0x21, 0x20, -0x20, 0x22, 0x23, 
                -0xa3, 0x22, 0x23, -0x23, 0x22, 0x23, -0x23, 0x22, 0x23, -0xa3,
                0x22, 0x23, -0x23, 0x22, 0x23, -0x23, 0x22, 0x23, -0x23, 0x22, 
                0x23, -0x23, 0x22, 0x22, 0x23, 0x22, 0x20, 0x21, 0x23, 0x03]

# Protocol-related Parameters